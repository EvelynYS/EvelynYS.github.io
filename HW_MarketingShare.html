<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <div class="jumbotron bg-success" style=" height: 120px">
        <h1>作業：2021年全球晶圓代工市佔率</h1>

    </div>
    <div id="container"></div>

    <div>
        <canvas id="myChart"></canvas>
    </div>



    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        const ctx = document.getElementById('myChart');
        const data = {
            labels: [
                '台積電',
                '三星電子',
                '聯電',
                '格羅方德',
                '中芯國際',
                '華虹半導體',
                '力機電',
                '世界先進',
                '高塔半導體',
                '東部高科'
            ],
            datasets: [{
                label: ['2021年全球晶圓代工市率'],
                data: [53.1, 17.3, 7.2, 6.1, 5.3, 2.6, 1.8, 1.4, 1.4, 1],
                backgroundColor: [
                    'rgb(255, 99, 132)',
                    'rgb(54, 162, 235)',
                    'rgb(255, 205, 86)',
                    'rgb(255, 99, 202)',
                    'rgb(54, 162, 98)',
                    'rgb(255, 205, 155)',
                    'rgb(255, 150, 132)',
                    'rgb(154, 162, 28)',
                    'rgb(255, 5, 186)',
                    'rgb(200, 205, 134)'
                ],
                hoverOffset: 10
            }]
        };
        new Chart(ctx, {
            type: 'pie',
            data: data,
        });
    </script>

    <script>

        const marketingShare = {
            publish: "2021/12/31",
            version: "1.0",
            titles: ['排名', '公司名稱', '國別', '市佔率%'],
            data: [
                { ranking: 1, company: "台積電", country: "台灣", ratio: 53.1 },
                { ranking: 2, company: "三星電子", country: "韓國", ratio: 17.3 },
                { ranking: 3, company: "聯電", country: "台灣", ratio: 7.2 },
                { ranking: 4, company: "格羅方德", country: "美國", ratio: 6.1 },
                { ranking: 5, company: "中蕊國際", country: "中國", ratio: 5.3 },
                { ranking: 6, company: "華虹半導體", country: "中國", ratio: 2.6 },
                { ranking: 7, company: "力機電", country: "台灣", ratio: 1.8 },
                { ranking: 8, company: "世界先進", country: "台灣", ratio: 1.4 },
                { ranking: 9, company: "高塔半導體", country: "以色列", ratio: 1.4 },
                { ranking: 10, company: "東部高科", country: "南韓", ratio: 1 }]
        };
        let container;
        let table, thead, tbody;
        let marketingShareArray = [];

        window.onload = function () {
            container = document.querySelector('#container');
            table = document.createElement('table');
            table.setAttribute("class", "table table-success table-bordered table-striped text-center");
            thead = document.createElement('thead');
            tbody = document.createElement('tbody');

            CreateThead(marketingShare.titles);

            marketingShare.data.forEach(company => {
                let values = Object.values(company);
                marketingShareArray.push(values);
            });

            CreateTbody(marketingShareArray);
        }

        function CreateThead(titles) {
            let theadTr = document.createElement('tr');
            titles.forEach((title, index) => {
                let theadTh = document.createElement('th');
                theadTh.innerText = title;
                theadTr.append(theadTh);
            })
            thead.append(theadTr);
            table.append(thead);
            container.append(table);
        }

        function CreateTbody(companyArray) {
            companyArray.forEach((company) => {
                let tbodyTr = document.createElement('tr');
                company.forEach((columnData) => {
                    let tbodyTd = document.createElement('td');
                    tbodyTd.innerText = columnData;
                    tbodyTr.append(tbodyTd);
                });
                tbody.append(tbodyTr);
            });
            table.append(tbody);
        }



    </script>


</body>

</html>